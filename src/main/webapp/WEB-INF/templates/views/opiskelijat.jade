h2(oph-msg="suoritusrekisteri.sovellus.nimi" oph-msg="suoritusrekisteri.opiskelijat.opiskelijatiedot") Opiskelijatiedot

script(type="text/ng-template" id="organisaatioTemplate.html")
  a
    span(bind-html-unsafe="(match.model.oppilaitosKoodi + ' ' + (match.model.nimi.fi ? match.model.nimi.fi : match.model.nimi.sv)) | typeaheadHighlight:query")

aside(class="row")
  div(class="col-sm-8")
    form(id="filterForm" class="well form-horizontal" ng-submit="search()")
      div(class="form-group")
        label(for="henkiloTerm" class="col-sm-2 control-label" oph-msg="suoritusrekisteri.opiskelijat.henkilo") Henkilö
        div(class="col-sm-5")
          input(id="henkiloTerm" class="form-control" ng-model="henkiloTerm" type="search" placeholder="Hae hetulla tai henkilönumerolla")
          span(ng-show="henkilo") {{henkilo.etunimet}} {{henkilo.sukunimi}} ({{henkilo.hetu || henkilo.syntymaaika}})

      div(class="form-group")
        label(for="organisaatioTerm" class="col-sm-2 control-label" oph-msg="suoritusrekisteri.opiskelijat.oppilaitos") Oppilaitos
        div(class="col-sm-5")
          input(id="organisaatioTerm" class="form-control" autocomplete="off" ng-model="organisaatioTerm" type="search" placeholder="Hae oppilaitoksen numerolla tai nimellä" typeahead="organisaatio as organisaatio.oppilaitosKoodi for organisaatio in getOppilaitos($viewValue) | filter:$viewValue | limitTo:10" typeahead-loading="loadingOppilaitos" typeahead-wait-ms="500" typeahead-template-url="organisaatioTemplate.html")

      div(class="form-group")
        div(class="col-sm-10 col-sm-offset-2")
          button(class="btn btn-primary" type="submit")
            span Hae
            span(class="glyphicon glyphicon-search")

table(class="table")
  thead
    tr
      th(oph-msg="suoritusrekisteri.opiskelijat.henkiloOid") Henkilö
      th(oph-msg="suoritusrekisteri.opiskelijat.opiskelijatiedot") Opiskelijatiedot
      th(oph-msg="suoritusrekisteri.opiskelijat.suoritustiedot") Suoritustiedot
      th
  tbody
    tr(ng-repeat="row in currentRows")
      td {{row.henkilo || row.henkiloOid}}
      td
        div(ng-repeat="o in row.opiskelijatiedot") {{o.oppilaitos || o.oppilaitosOid}} {{o.luokka}}
      td
        div(ng-repeat="s in row.suoritustiedot") {{s.komo}} {{s.oppilaitos || s.myontaja}}
      td
        a(class="btn bt-default btn-xs" href="#/muokkaa/{{row.henkiloOid}}" oph-msg="suoritusrekisteri.opiskelijat.muokkaa") Muokkaa tietoja
    tr(ng-show="loading")
      td(class="loading-td" colspan="4")
        div(class="loading-large")

aside(class="text-center" ng-hide="loading")
  div(class="pagination" ng-show="pageNumbers && pageNumbers.length > 0")
    ul
      li
        a(ng-click="prevPage()")
          span(class="glyphicon glyphicon-arrow-left")
      li(class="{{page === (pageNum - 1) ? 'active' : ''}}" ng-repeat="pageNum in pageNumbers")
        a(ng-click="showPageWithNumber(pageNum)") {{pageNum}}
      li
        a(ng-click="nextPage()")
          span(class="glyphicon glyphicon-arrow-right")
